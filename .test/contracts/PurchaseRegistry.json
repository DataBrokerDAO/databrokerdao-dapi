{
  "contractName": "PurchaseRegistry",
  "abi": [
    {
      "constant": true,
      "inputs": [],
      "name": "gateKeeper",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "name": "purchases",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "purchasesIndex",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "token",
      "outputs": [
        {
          "name": "",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "name": "_gateKeeper",
          "type": "address"
        },
        {
          "name": "_token",
          "type": "address"
        },
        {
          "name": "_streamRegistry",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "name": "stream",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "user",
          "type": "address"
        },
        {
          "indexed": false,
          "name": "startTime",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "endTime",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "price",
          "type": "uint256"
        },
        {
          "indexed": false,
          "name": "purchase",
          "type": "address"
        }
      ],
      "name": "AccessPurchased",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "key",
          "type": "address"
        }
      ],
      "name": "AddressCacheInvalidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "key",
          "type": "bytes32"
        }
      ],
      "name": "Bytes32CacheInvalidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "name": "key",
          "type": "uint256"
        }
      ],
      "name": "Uint256CacheInvalidated",
      "type": "event"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_stream",
          "type": "address"
        },
        {
          "name": "_endTime",
          "type": "uint256"
        }
      ],
      "name": "purchaseAccess",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_stream",
          "type": "bytes32"
        }
      ],
      "name": "hasAccess",
      "outputs": [
        {
          "name": "access",
          "type": "bool"
        }
      ],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "_salePercentage",
          "type": "uint256"
        }
      ],
      "name": "setSalePercentage",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [],
      "name": "getIndexLength",
      "outputs": [
        {
          "name": "length",
          "type": "uint256"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "index",
          "type": "uint256"
        }
      ],
      "name": "getByIndex",
      "outputs": [
        {
          "name": "",
          "type": "bytes32"
        },
        {
          "name": "contractAddress",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": true,
      "inputs": [
        {
          "name": "_key",
          "type": "address"
        }
      ],
      "name": "getByKey",
      "outputs": [
        {
          "name": "",
          "type": "bytes32"
        },
        {
          "name": "contractAddress",
          "type": "address"
        }
      ],
      "payable": false,
      "stateMutability": "view",
      "type": "function"
    },
    {
      "constant": false,
      "inputs": [
        {
          "name": "",
          "type": "address"
        },
        {
          "name": "_cachedBytes32",
          "type": "bytes32"
        },
        {
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "invalidateCache",
      "outputs": [],
      "payable": false,
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "bytecode": "0x60606040526001600755341561001457600080fd5b604051606080610c2b8339810160405261003790678000000000000000906100bd565b60008054600160a060020a03948516600160a060020a031991821617909155600180543086169083161790557f5075726368617365526567697374727900000000000000000000000000000000600255600580549385169382169390931790925560068054919093169116179055610116565b60006100b6825161010a565b9392505050565b6000806000606084860312156100d257600080fd5b60006100de86866100aa565b93505060206100ef868287016100aa565b9250506040610100868287016100aa565b9150509250925092565b600160a060020a031690565b610b06806101256000396000f3006060604052600436106100955763ffffffff60e060020a6000350416630999f424811461009a5780632d883a73146100ba5780633d188fab146100ef57806345d61ded1461010d578063498770381461012d57806372cc98501461014b578063842a77d314610169578063b8e52d8714610187578063db83423d146101b2578063e1ba7d01146101dd578063fc0c546a146101fd575b600080fd5b34156100a557600080fd5b6100b86100b33660046107fb565b610210565b005b34156100c557600080fd5b6100d86100d3366004610835565b61054a565b6040516100e6929190610967565b60405180910390f35b34156100fa57600080fd5b6100b86101083660046107ae565b610582565b341561011857600080fd5b6101206105bc565b6040516100e69190610982565b341561013857600080fd5b6100d8610146366004610788565b6105cb565b341561015657600080fd5b6100b8610164366004610835565b6105ec565b341561017457600080fd5b610120610182366004610788565b6105f1565b341561019257600080fd5b6101a56101a0366004610835565b61060c565b6040516100e69190610886565b34156101bd57600080fd5b6101d06101cb366004610835565b610634565b6040516100e69190610959565b34156101e857600080fd5b6101f061063a565b6040516100e69190610990565b341561020857600080fd5b610120610640565b6006546000908190819081908190600160a060020a0316633c1b12b68883604051602001526040518263ffffffff1660e060020a0281526004016102549190610886565b602060405180830381600087803b151561026d57600080fd5b6102c65a03f1151561027e57600080fd5b505050604051805195504294506102ad90506102a0878663ffffffff61064f16565b869063ffffffff61066616565b92506102d56102c8606460075461069c90919063ffffffff16565b849063ffffffff61066616565b600554600654919350600160a060020a03908116916323b872dd9133911663a72b0d2d8b6000604051602001526040518263ffffffff1660e060020a0281526004016103219190610886565b602060405180830381600087803b151561033a57600080fd5b6102c65a03f1151561034b57600080fd5b50505060405180519050610365878763ffffffff61064f16565b6000604051602001526040518463ffffffff1660e060020a02815260040161038f93929190610894565b602060405180830381600087803b15156103a857600080fd5b6102c65a03f115156103b957600080fd5b5050506040518051905015156103ce57600080fd5b600554600160a060020a03166323b872dd3330856000604051602001526040518463ffffffff1660e060020a02815260040161040c9392919061093e565b602060405180830381600087803b151561042557600080fd5b6102c65a03f1151561043657600080fd5b50505060405180519050151561044b57600080fd5b848487338a61045861071a565b61046695949392919061099e565b604051809103906000f080151561047c57600080fd5b600160a060020a0381166000818152600360205260409020805473ffffffffffffffffffffffffffffffffffffffff191690911790556004805491925090600181016104c88382610729565b506000918252602090912001805473ffffffffffffffffffffffffffffffffffffffff191633600160a060020a038116919091179091557fa46fb31f0524729f82c7e370054d0f3ad832386ce8a7ecf09d7368594d30b30590889086898786604051610539969594939291906108bc565b60405180910390a150505050505050565b60008061057960048481548110151561055f57fe5b600091825260209091200154600160a060020a03166105cb565b91509150915091565b817fd5c977477c90fd6c009dd3275798b51da8bd2df8e0a25be47773f87b53d2e39960405160405180910390a26105b76106b3565b505050565b600054600160a060020a031681565b600160a060020a039081166000908152600360205260408120549092911690565b600755565b600360205260009081526040902054600160a060020a031681565b600480548290811061061a57fe5b600091825260209091200154600160a060020a0316905081565b50600190565b60045490565b600554600160a060020a031681565b60008282111561065b57fe5b508082035b92915050565b6000808315156106795760009150610695565b5082820282848281151561068957fe5b041461069157fe5b8091505b5092915050565b60008082848115156106aa57fe5b04949350505050565b600154600254600160a060020a0390911690633d188fab90600090816040518463ffffffff1660e060020a0281526004016106f093929190610916565b600060405180830381600087803b151561070957600080fd5b6102c65a03f115156105b757600080fd5b60405160bb80610a1283390190565b8154818355818115116105b7576000838152602090206105b791810190830161076691905b80821115610762576000815560010161074e565b5090565b90565b600061077582356109ea565b9392505050565b60006107758235610766565b60006020828403121561079a57600080fd5b60006107a68484610769565b949350505050565b6000806000606084860312156107c357600080fd5b60006107cf8686610769565b93505060206107e08682870161077c565b92505060406107f18682870161077c565b9150509250925092565b6000806040838503121561080e57600080fd5b600061081a8585610769565b925050602061082b8582860161077c565b9150509250929050565b60006020828403121561084757600080fd5b60006107a6848461077c565b61085c816109ea565b82525050565b61085c816109f6565b61085c81610766565b61085c816109fb565b61085c81610a06565b602081016106608284610853565b606081016108a28286610853565b6108af6020830185610853565b6107a6604083018461086b565b60c081016108ca8289610853565b6108d76020830188610853565b6108e4604083018761086b565b6108f1606083018661086b565b6108fe608083018561086b565b61090b60a0830184610853565b979650505050505050565b606081016109248286610853565b610931602083018561086b565b6107a6604083018461087d565b6060810161094c8286610853565b6108af6020830185610874565b602081016106608284610862565b60408101610975828561086b565b6107756020830184610853565b602081016106608284610874565b60208101610660828461086b565b60a081016109ac828861086b565b6109b9602083018761086b565b6109c6604083018661086b565b6109d36060830185610853565b6109e06080830184610853565b9695505050505050565b600160a060020a031690565b151590565b6000610660826109ea565b600061066082610766560060606040523415600e57600080fd5b60405160a08060bb8339810160405280805191906020018051919060200180519190602001805191906020018051600096909655505060019290925560025560038054600160a060020a03928316600160a060020a0319918216179091556004805492909316911617905560358060866000396000f3006060604052600080fd00a165627a7a7230582037773f0e4920a0780b7ee0a22b4e451f081107232569db8d2d14dadeddb624b20029a265627a7a723058203063bb7156feaa79f8ba11b0189da9a85dfb62b43b0840a5644b90ce2d0ca06c6c6578706572696d656e74616cf50037",
  "deployedBytecode": "0x6060604052600436106100955763ffffffff60e060020a6000350416630999f424811461009a5780632d883a73146100ba5780633d188fab146100ef57806345d61ded1461010d578063498770381461012d57806372cc98501461014b578063842a77d314610169578063b8e52d8714610187578063db83423d146101b2578063e1ba7d01146101dd578063fc0c546a146101fd575b600080fd5b34156100a557600080fd5b6100b86100b33660046107fb565b610210565b005b34156100c557600080fd5b6100d86100d3366004610835565b61054a565b6040516100e6929190610967565b60405180910390f35b34156100fa57600080fd5b6100b86101083660046107ae565b610582565b341561011857600080fd5b6101206105bc565b6040516100e69190610982565b341561013857600080fd5b6100d8610146366004610788565b6105cb565b341561015657600080fd5b6100b8610164366004610835565b6105ec565b341561017457600080fd5b610120610182366004610788565b6105f1565b341561019257600080fd5b6101a56101a0366004610835565b61060c565b6040516100e69190610886565b34156101bd57600080fd5b6101d06101cb366004610835565b610634565b6040516100e69190610959565b34156101e857600080fd5b6101f061063a565b6040516100e69190610990565b341561020857600080fd5b610120610640565b6006546000908190819081908190600160a060020a0316633c1b12b68883604051602001526040518263ffffffff1660e060020a0281526004016102549190610886565b602060405180830381600087803b151561026d57600080fd5b6102c65a03f1151561027e57600080fd5b505050604051805195504294506102ad90506102a0878663ffffffff61064f16565b869063ffffffff61066616565b92506102d56102c8606460075461069c90919063ffffffff16565b849063ffffffff61066616565b600554600654919350600160a060020a03908116916323b872dd9133911663a72b0d2d8b6000604051602001526040518263ffffffff1660e060020a0281526004016103219190610886565b602060405180830381600087803b151561033a57600080fd5b6102c65a03f1151561034b57600080fd5b50505060405180519050610365878763ffffffff61064f16565b6000604051602001526040518463ffffffff1660e060020a02815260040161038f93929190610894565b602060405180830381600087803b15156103a857600080fd5b6102c65a03f115156103b957600080fd5b5050506040518051905015156103ce57600080fd5b600554600160a060020a03166323b872dd3330856000604051602001526040518463ffffffff1660e060020a02815260040161040c9392919061093e565b602060405180830381600087803b151561042557600080fd5b6102c65a03f1151561043657600080fd5b50505060405180519050151561044b57600080fd5b848487338a61045861071a565b61046695949392919061099e565b604051809103906000f080151561047c57600080fd5b600160a060020a0381166000818152600360205260409020805473ffffffffffffffffffffffffffffffffffffffff191690911790556004805491925090600181016104c88382610729565b506000918252602090912001805473ffffffffffffffffffffffffffffffffffffffff191633600160a060020a038116919091179091557fa46fb31f0524729f82c7e370054d0f3ad832386ce8a7ecf09d7368594d30b30590889086898786604051610539969594939291906108bc565b60405180910390a150505050505050565b60008061057960048481548110151561055f57fe5b600091825260209091200154600160a060020a03166105cb565b91509150915091565b817fd5c977477c90fd6c009dd3275798b51da8bd2df8e0a25be47773f87b53d2e39960405160405180910390a26105b76106b3565b505050565b600054600160a060020a031681565b600160a060020a039081166000908152600360205260408120549092911690565b600755565b600360205260009081526040902054600160a060020a031681565b600480548290811061061a57fe5b600091825260209091200154600160a060020a0316905081565b50600190565b60045490565b600554600160a060020a031681565b60008282111561065b57fe5b508082035b92915050565b6000808315156106795760009150610695565b5082820282848281151561068957fe5b041461069157fe5b8091505b5092915050565b60008082848115156106aa57fe5b04949350505050565b600154600254600160a060020a0390911690633d188fab90600090816040518463ffffffff1660e060020a0281526004016106f093929190610916565b600060405180830381600087803b151561070957600080fd5b6102c65a03f115156105b757600080fd5b60405160bb80610a1283390190565b8154818355818115116105b7576000838152602090206105b791810190830161076691905b80821115610762576000815560010161074e565b5090565b90565b600061077582356109ea565b9392505050565b60006107758235610766565b60006020828403121561079a57600080fd5b60006107a68484610769565b949350505050565b6000806000606084860312156107c357600080fd5b60006107cf8686610769565b93505060206107e08682870161077c565b92505060406107f18682870161077c565b9150509250925092565b6000806040838503121561080e57600080fd5b600061081a8585610769565b925050602061082b8582860161077c565b9150509250929050565b60006020828403121561084757600080fd5b60006107a6848461077c565b61085c816109ea565b82525050565b61085c816109f6565b61085c81610766565b61085c816109fb565b61085c81610a06565b602081016106608284610853565b606081016108a28286610853565b6108af6020830185610853565b6107a6604083018461086b565b60c081016108ca8289610853565b6108d76020830188610853565b6108e4604083018761086b565b6108f1606083018661086b565b6108fe608083018561086b565b61090b60a0830184610853565b979650505050505050565b606081016109248286610853565b610931602083018561086b565b6107a6604083018461087d565b6060810161094c8286610853565b6108af6020830185610874565b602081016106608284610862565b60408101610975828561086b565b6107756020830184610853565b602081016106608284610874565b60208101610660828461086b565b60a081016109ac828861086b565b6109b9602083018761086b565b6109c6604083018661086b565b6109d36060830185610853565b6109e06080830184610853565b9695505050505050565b600160a060020a031690565b151590565b6000610660826109ea565b600061066082610766560060606040523415600e57600080fd5b60405160a08060bb8339810160405280805191906020018051919060200180519190602001805191906020018051600096909655505060019290925560025560038054600160a060020a03928316600160a060020a0319918216179091556004805492909316911617905560358060866000396000f3006060604052600080fd00a165627a7a7230582037773f0e4920a0780b7ee0a22b4e451f081107232569db8d2d14dadeddb624b20029a265627a7a723058203063bb7156feaa79f8ba11b0189da9a85dfb62b43b0840a5644b90ce2d0ca06c6c6578706572696d656e74616cf50037",
  "sourceMap": "520:3492:4:-;;;909:1;887:23;;1093:277;;;;;;;;;;;;;;;;;;;;;;;;;;250:10:13;:36;;-1:-1:-1;;;;;250:36:13;;;-1:-1:-1;;;;;;250:36:13;;;;;;;;145:24:24;;1262:4:4;145:24:24;;;;;;;;112:115:26;202:8;:20;1287:5:4;:24;;;;;;;;;;;;;;;1317:14;:48;;;;;;;;;;;520:3492;;5:122:-1;;83:39;114:6;108:13;83:39;;;74:48;68:59;-1:-1;;;68:59;134:535;;;;283:2;271:9;262:7;258:23;254:32;251:2;;;299:1;296;289:12;251:2;334:1;351:64;407:7;387:9;351:64;;;341:74;;313:108;452:2;470:64;526:7;517:6;506:9;502:22;470:64;;;460:74;;431:109;571:2;589:64;645:7;636:6;625:9;621:22;589:64;;;579:74;;550:109;245:424;;;;;;676:128;-1:-1;;;;;745:54;;728:76;;520:3492:4;;;;;;",
  "deployedSourceMap": "520:3492:4:-;;;;;;;;;-1:-1:-1;;;520:3492:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1610:962;;;;;;;;;;;;;;;;;;;;3471:144;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;3819:191;;;;;;;;;;;;;;;;;;77:28:13;;;;;;;;;;;;;;;;;;;;3619:148:4;;;;;;;;;;;;;;;;;;3213:99;;;;;;;;;;;;;;;;;;743:46;;;;;;;;;;;;;;;;;;793:31;;;;;;;;;;;;;;;;;;;;;;;;;;2714:184;;;;;;;;;;;;;;;;;;;;;;;;;;3366:101;;;;;;;;;;;;;;;;;;;;829:21;;;;;;;;;;;;1610:962;1749:14;;1720:26;;;;;;;;;;-1:-1:-1;;;;;1749:14:4;:29;1779:7;1720:26;1749:38;;;;;;;;;;-1:-1:-1;;;1749:38:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;1811:3:4;;-1:-1:-1;1840:51:4;;-1:-1:-1;1866:24:4;:8;1811:3;1866:24;:12;:24;:::i;:::-;1840:21;;:51;:25;:51;:::i;:::-;1820:71;;1937:41;1954:23;1973:3;1954:14;;:18;;:23;;;;:::i;:::-;1937:12;;:41;:16;:41;:::i;:::-;2012:5;;2043:14;;1914:64;;-1:-1:-1;;;;;;2012:5:4;;;;:18;;2031:10;;2043:14;:29;2073:7;2012:5;2043:38;;;;;;;;;;-1:-1:-1;;;2043:38:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;2083:33:4;:12;2100:15;2083:33;:16;:33;:::i;:::-;2012:105;;;;;;;;;;;-1:-1:-1;;;2012:105:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2004:114;;;;;;;;2145:5;;-1:-1:-1;;;;;2145:5:4;:18;2164:10;2176:4;2182:15;2145:5;:53;;;;;;;;;;-1:-1:-1;;;2145:53:4;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2137:62;;;;;;;;2269:21;2298:10;2316:8;2332:10;2350:7;2249:114;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;2393:28:4;;;;;;:9;:28;;;;;:39;;-1:-1:-1;;2393:39:4;;;;;;2438:14;:31;;2229:134;;-1:-1:-1;2438:14:4;2393:39;2438:31;;;:14;:31;;:::i;:::-;-1:-1:-1;2438:31:4;;;;;;;;;;;-1:-1:-1;;2438:31:4;2458:10;-1:-1:-1;;;;;2438:31:4;;;;;;;;;2476:91;;2492:7;;2513:10;2525:8;2535:12;2557:8;2476:91;;;;;;;;;;;;;;;;;;;;1610:962;;;;;;;:::o;3471:144::-;3524:7;3541:23;3579:31;3588:14;3603:5;3588:21;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;3588:21:4;3579:8;:31::i;:::-;3572:38;;;;3471:144;;;:::o;3819:191::-;3961:14;3937:39;;;;;;;;;;3982:23;:21;:23::i;:::-;3819:191;;;:::o;77:28:13:-;;;-1:-1:-1;;;;;77:28:13;;:::o;3619:148:4:-;-1:-1:-1;;;;;3746:15:4;;;3672:7;3746:15;;;:9;:15;;;;;;3672:7;;3746:15;;;3619:148::o;3213:99::-;3275:14;:32;3213:99::o;743:46::-;;;;;;;;;;;;-1:-1:-1;;;;;743:46:4;;:::o;793:31::-;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;793:31:4;;-1:-1:-1;793:31:4;:::o;2714:184::-;-1:-1:-1;2889:4:4;;2714:184::o;3366:101::-;3441:14;:21;;3366:101::o;829:21::-;;;-1:-1:-1;;;;;829:21:4;;:::o;836:110:30:-;894:7;916:6;;;;909:14;;;;-1:-1:-1;936:5:30;;;836:110;;;;;:::o;203:173::-;261:7;;280:6;;276:35;;;303:1;296:8;;;;276:35;-1:-1:-1;328:5:30;;;332:1;328;:5;346;;;;;;;;:10;339:18;;;;370:1;363:8;;203:173;;;;;;:::o;458:265::-;516:7;605:9;621:1;617;:5;;;;;;;;;458:265;-1:-1:-1;;;;458:265:30:o;231:96:26:-;273:6;;310:8;;-1:-1:-1;;;;;273:6:26;;;;:22;;:6;;;:49;;;;;-1:-1:-1;;;273:49:26;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;520:3492:4;;;;;;;;;;:::o;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;:::o;5:118:-1:-;;72:46;110:6;97:20;72:46;;;63:55;57:66;-1:-1;;;57:66;130:118;;197:46;235:6;222:20;197:46;;380:241;;484:2;472:9;463:7;459:23;455:32;452:2;;;500:1;497;490:12;452:2;535:1;552:53;597:7;577:9;552:53;;;542:63;446:175;-1:-1;;;;446:175;628:491;;;;766:2;754:9;745:7;741:23;737:32;734:2;;;782:1;779;772:12;734:2;817:1;834:53;879:7;859:9;834:53;;;824:63;;796:97;924:2;942:53;987:7;978:6;967:9;963:22;942:53;;;932:63;;903:98;1032:2;1050:53;1095:7;1086:6;1075:9;1071:22;1050:53;;;1040:63;;1011:98;728:391;;;;;;1126:366;;;1247:2;1235:9;1226:7;1222:23;1218:32;1215:2;;;1263:1;1260;1253:12;1215:2;1298:1;1315:53;1360:7;1340:9;1315:53;;;1305:63;;1277:97;1405:2;1423:53;1468:7;1459:6;1448:9;1444:22;1423:53;;;1413:63;;1384:98;1209:283;;;;;;1499:241;;1603:2;1591:9;1582:7;1578:23;1574:32;1571:2;;;1619:1;1616;1609:12;1571:2;1654:1;1671:53;1716:7;1696:9;1671:53;;1995:110;2068:31;2093:5;2068:31;;;2063:3;2056:44;2050:55;;;2112:101;2179:28;2201:5;2179:28;;2220:110;2293:31;2318:5;2293:31;;2337:148;2426:53;2473:5;2426:53;;2979:132;3060:45;3099:5;3060:45;;3235:193;3343:2;3328:18;;3357:61;3332:9;3391:6;3357:61;;3435:395;3599:2;3584:18;;3613:61;3588:9;3647:6;3613:61;;;3685:62;3743:2;3732:9;3728:18;3719:6;3685:62;;;3758;3816:2;3805:9;3801:18;3792:6;3758:62;;3837:701;4085:3;4070:19;;4100:61;4074:9;4134:6;4100:61;;;4172:62;4230:2;4219:9;4215:18;4206:6;4172:62;;;4245;4303:2;4292:9;4288:18;4279:6;4245:62;;;4318;4376:2;4365:9;4361:18;4352:6;4318:62;;;4391:63;4449:3;4438:9;4434:19;4425:6;4391:63;;;4465;4523:3;4512:9;4508:19;4499:6;4465:63;;;4056:482;;;;;;;;;;4545:411;4717:2;4702:18;;4731:61;4706:9;4765:6;4731:61;;;4803:62;4861:2;4850:9;4846:18;4837:6;4803:62;;;4876:70;4942:2;4931:9;4927:18;4918:6;4876:70;;4963:443;5151:2;5136:18;;5165:61;5140:9;5199:6;5165:61;;;5237:86;5319:2;5308:9;5304:18;5295:6;5237:86;;5413:181;5515:2;5500:18;;5529:55;5504:9;5557:6;5529:55;;5601:294;5737:2;5722:18;;5751:61;5726:9;5785:6;5751:61;;;5823:62;5881:2;5870:9;5866:18;5857:6;5823:62;;5902:225;6026:2;6011:18;;6040:77;6015:9;6090:6;6040:77;;6604:193;6712:2;6697:18;;6726:61;6701:9;6760:6;6726:61;;6804:599;7024:3;7009:19;;7039:61;7013:9;7073:6;7039:61;;;7111:62;7169:2;7158:9;7154:18;7145:6;7111:62;;;7184;7242:2;7231:9;7227:18;7218:6;7184:62;;;7257;7315:2;7304:9;7300:18;7291:6;7257:62;;;7330:63;7388:3;7377:9;7373:19;7364:6;7330:63;;;6995:408;;;;;;;;;7410:128;-1:-1;;;;;7479:54;;7462:76;7545:92;7618:13;7611:21;;7594:43;8123:131;;8218:31;8243:5;8218:31;;8686:123;;8773:31;8798:5;8773:31;",
  "source": "pragma solidity ^0.4.20;\npragma experimental ABIEncoderV2;\n\nimport \"./Purchase.sol\";\nimport \"../stream/StreamRegistry.sol\";\nimport \"../dtxtoken/DtxToken.sol\";\nimport \"@settlemint/solidity-mint/contracts/authentication/Secured.sol\";\nimport \"@settlemint/solidity-mint/contracts/utility/syncing/Syncable.sol\";\nimport \"@settlemint/solidity-mint/contracts/utility/caching/Cacher.sol\";\nimport \"@settlemint/solidity-mint/contracts/utility/caching/CachedByBytes32.sol\";\nimport \"zeppelin-solidity/contracts/math/SafeMath.sol\";\n\n\ncontract PurchaseRegistry is Secured, Syncable, Cacher, CachedByBytes32 {\n  using SafeMath for uint256;\n\n  event AccessPurchased(address stream, address user, uint startTime, uint endTime, uint price, address purchase);\n\n  mapping (address => Purchase) public purchases;\n  address[] public purchasesIndex;\n\n  DtxToken public token;\n  StreamRegistry streamRegistry;\n  uint salePercentage = 1;\n\n  /**\n  @dev Contructor\n  @notice                Sets the address for token\n  @param _gateKeeper     Address of the gatekeeper\n  @param _token          Address of the token\n  */\n  function PurchaseRegistry(\n    address _gateKeeper,\n    address _token,\n    address _streamRegistry\n  )\n    Secured(_gateKeeper)\n    CachedByBytes32(\"PurchaseRegistry\", this)\n    public\n  {\n    token = DtxToken(_token);\n    streamRegistry = StreamRegistry(_streamRegistry);\n  }\n\n  /**\n  @notice               Lets the sender buy access to the Stream\n  @param _stream        Id of the listing\n  @param _endTime       Timestamp of when the user will stop receiving Stream readings in seconds (not milliseconds!)\n  */\n  function purchaseAccess(address _stream, uint _endTime) public {\n    // Calculate total cost for the user\n    uint _streamPricePerSecond = streamRegistry.getStreamPrice(_stream);\n    uint _startTime = now;\n    uint _streamPrice = _streamPricePerSecond.mul(_endTime.sub(_startTime));\n\n    // Pay out:\n    uint _salePercentage = _streamPrice.mul(salePercentage.div(100));\n    // Sensor owner\n    require(token.transferFrom(msg.sender, streamRegistry.getStreamOwner(_stream), _streamPrice.sub(_salePercentage)));\n    // DBDAO\n    require(token.transferFrom(msg.sender, this, _salePercentage));\n\n    // Create purchase\n    Purchase purchase = new Purchase(\n      _streamPricePerSecond,\n      _startTime,\n      _endTime,\n      msg.sender,\n      _stream\n    );\n\n    // Push to mapping\n    purchases[address(purchase)] = purchase;\n    purchasesIndex.push(msg.sender);\n\n    AccessPurchased(_stream, msg.sender, _startTime, _endTime, _streamPrice, address(purchase));\n  }\n\n  /**\n  @notice               Returns whether or not the sender has access to this listing\n  @param _stream        Id of the listing\n  */\n  function hasAccess(bytes32 _stream) public returns (bool access){\n    // if (streams[_stream].purchases[msg.sender].endTime == 0) {\n    //   return false;\n    // }\n    return true;\n  }\n\n  /**\n  @notice               Returns array of ids of streams the user has access to\n  */\n  // function getAllPurchases() public returns (bytes32[] purchases) {\n  //   return userPurchases[msg.sender];\n  // }\n\n  /**\n  @notice                Sets the sale percentage\n  @param _salePercentage salePercentage\n  */\n  function setSalePercentage(uint _salePercentage) public {\n    salePercentage = _salePercentage;\n  }\n\n  /**\n  * implementation of syncable methods\n  */\n  function getIndexLength() public view returns (uint length) {\n    length = purchasesIndex.length;\n  }\n\n  function getByIndex(uint index) public view returns (bytes32 /*key*/, address contractAddress) {\n    return getByKey(purchasesIndex[index]);\n  }\n\n  function getByKey(address _key) public view returns (bytes32 /*key*/, address contractAddress) {\n    contractAddress = address(purchases[_key]);\n  }\n\n  /**\n  * implementation of cacher methods\n  */\n  function invalidateCache(address /*_cachedAddress*/, bytes32 _cachedBytes32, uint256 /*_cachedUint256*/) public {\n    Bytes32CacheInvalidated(_cachedBytes32);\n    super.invalidateCache();\n  }\n}\n",
  "sourcePath": "/Users/silkevandenbroeck/databrokerDAO/databrokerdao-dapi/contracts/purchase/PurchaseRegistry.sol",
  "ast": {
    "attributes": {
      "absolutePath": "/Users/silkevandenbroeck/databrokerDAO/databrokerdao-dapi/contracts/purchase/PurchaseRegistry.sol",
      "exportedSymbols": {
        "PurchaseRegistry": [
          467
        ]
      }
    },
    "children": [
      {
        "attributes": {
          "literals": [
            "solidity",
            "^",
            "0.4",
            ".20"
          ]
        },
        "id": 201,
        "name": "PragmaDirective",
        "src": "0:24:4"
      },
      {
        "attributes": {
          "literals": [
            "experimental",
            "ABIEncoderV2"
          ]
        },
        "id": 202,
        "name": "PragmaDirective",
        "src": "25:33:4"
      },
      {
        "attributes": {
          "SourceUnit": 200,
          "absolutePath": "/Users/silkevandenbroeck/databrokerDAO/databrokerdao-dapi/contracts/purchase/Purchase.sol",
          "file": "./Purchase.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 203,
        "name": "ImportDirective",
        "src": "60:24:4"
      },
      {
        "attributes": {
          "SourceUnit": 697,
          "absolutePath": "/Users/silkevandenbroeck/databrokerDAO/databrokerdao-dapi/contracts/stream/StreamRegistry.sol",
          "file": "../stream/StreamRegistry.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 204,
        "name": "ImportDirective",
        "src": "85:38:4"
      },
      {
        "attributes": {
          "SourceUnit": 138,
          "absolutePath": "/Users/silkevandenbroeck/databrokerDAO/databrokerdao-dapi/contracts/dtxtoken/DtxToken.sol",
          "file": "../dtxtoken/DtxToken.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 205,
        "name": "ImportDirective",
        "src": "124:34:4"
      },
      {
        "attributes": {
          "SourceUnit": 1420,
          "absolutePath": "@settlemint/solidity-mint/contracts/authentication/Secured.sol",
          "file": "@settlemint/solidity-mint/contracts/authentication/Secured.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 206,
        "name": "ImportDirective",
        "src": "159:72:4"
      },
      {
        "attributes": {
          "SourceUnit": 3948,
          "absolutePath": "@settlemint/solidity-mint/contracts/utility/syncing/Syncable.sol",
          "file": "@settlemint/solidity-mint/contracts/utility/syncing/Syncable.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 207,
        "name": "ImportDirective",
        "src": "232:74:4"
      },
      {
        "attributes": {
          "SourceUnit": 3916,
          "absolutePath": "@settlemint/solidity-mint/contracts/utility/caching/Cacher.sol",
          "file": "@settlemint/solidity-mint/contracts/utility/caching/Cacher.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 208,
        "name": "ImportDirective",
        "src": "307:72:4"
      },
      {
        "attributes": {
          "SourceUnit": 3892,
          "absolutePath": "@settlemint/solidity-mint/contracts/utility/caching/CachedByBytes32.sol",
          "file": "@settlemint/solidity-mint/contracts/utility/caching/CachedByBytes32.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 209,
        "name": "ImportDirective",
        "src": "380:81:4"
      },
      {
        "attributes": {
          "SourceUnit": 4046,
          "absolutePath": "zeppelin-solidity/contracts/math/SafeMath.sol",
          "file": "zeppelin-solidity/contracts/math/SafeMath.sol",
          "scope": 468,
          "symbolAliases": [
            null
          ],
          "unitAlias": ""
        },
        "id": 210,
        "name": "ImportDirective",
        "src": "462:55:4"
      },
      {
        "attributes": {
          "contractDependencies": [
            199,
            1419,
            3825,
            3891,
            3915,
            3947
          ],
          "contractKind": "contract",
          "documentation": null,
          "fullyImplemented": true,
          "linearizedBaseContracts": [
            467,
            3891,
            3825,
            3915,
            3947,
            1419
          ],
          "name": "PurchaseRegistry",
          "scope": 468
        },
        "children": [
          {
            "attributes": {
              "arguments": [
                null
              ]
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "Secured",
                  "referencedDeclaration": 1419,
                  "type": "contract Secured"
                },
                "id": 211,
                "name": "UserDefinedTypeName",
                "src": "549:7:4"
              }
            ],
            "id": 212,
            "name": "InheritanceSpecifier",
            "src": "549:7:4"
          },
          {
            "attributes": {
              "arguments": [
                null
              ]
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "Syncable",
                  "referencedDeclaration": 3947,
                  "type": "contract Syncable"
                },
                "id": 213,
                "name": "UserDefinedTypeName",
                "src": "558:8:4"
              }
            ],
            "id": 214,
            "name": "InheritanceSpecifier",
            "src": "558:8:4"
          },
          {
            "attributes": {
              "arguments": [
                null
              ]
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "Cacher",
                  "referencedDeclaration": 3915,
                  "type": "contract Cacher"
                },
                "id": 215,
                "name": "UserDefinedTypeName",
                "src": "568:6:4"
              }
            ],
            "id": 216,
            "name": "InheritanceSpecifier",
            "src": "568:6:4"
          },
          {
            "attributes": {
              "arguments": [
                null
              ]
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "CachedByBytes32",
                  "referencedDeclaration": 3891,
                  "type": "contract CachedByBytes32"
                },
                "id": 217,
                "name": "UserDefinedTypeName",
                "src": "576:15:4"
              }
            ],
            "id": 218,
            "name": "InheritanceSpecifier",
            "src": "576:15:4"
          },
          {
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "SafeMath",
                  "referencedDeclaration": 4045,
                  "type": "library SafeMath"
                },
                "id": 219,
                "name": "UserDefinedTypeName",
                "src": "602:8:4"
              },
              {
                "attributes": {
                  "name": "uint256",
                  "type": "uint256"
                },
                "id": 220,
                "name": "ElementaryTypeName",
                "src": "615:7:4"
              }
            ],
            "id": 221,
            "name": "UsingForDirective",
            "src": "596:27:4"
          },
          {
            "attributes": {
              "anonymous": false,
              "name": "AccessPurchased"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "stream",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 222,
                        "name": "ElementaryTypeName",
                        "src": "649:7:4"
                      }
                    ],
                    "id": 223,
                    "name": "VariableDeclaration",
                    "src": "649:14:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "user",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 224,
                        "name": "ElementaryTypeName",
                        "src": "665:7:4"
                      }
                    ],
                    "id": 225,
                    "name": "VariableDeclaration",
                    "src": "665:12:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "startTime",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 226,
                        "name": "ElementaryTypeName",
                        "src": "679:4:4"
                      }
                    ],
                    "id": 227,
                    "name": "VariableDeclaration",
                    "src": "679:14:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "endTime",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 228,
                        "name": "ElementaryTypeName",
                        "src": "695:4:4"
                      }
                    ],
                    "id": 229,
                    "name": "VariableDeclaration",
                    "src": "695:12:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "price",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 230,
                        "name": "ElementaryTypeName",
                        "src": "709:4:4"
                      }
                    ],
                    "id": 231,
                    "name": "VariableDeclaration",
                    "src": "709:10:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "indexed": false,
                      "name": "purchase",
                      "scope": 235,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 232,
                        "name": "ElementaryTypeName",
                        "src": "721:7:4"
                      }
                    ],
                    "id": 233,
                    "name": "VariableDeclaration",
                    "src": "721:16:4"
                  }
                ],
                "id": 234,
                "name": "ParameterList",
                "src": "648:90:4"
              }
            ],
            "id": 235,
            "name": "EventDefinition",
            "src": "627:112:4"
          },
          {
            "attributes": {
              "constant": false,
              "name": "purchases",
              "scope": 467,
              "stateVariable": true,
              "storageLocation": "default",
              "type": "mapping(address => contract Purchase)",
              "value": null,
              "visibility": "public"
            },
            "children": [
              {
                "attributes": {
                  "type": "mapping(address => contract Purchase)"
                },
                "children": [
                  {
                    "attributes": {
                      "name": "address",
                      "type": "address"
                    },
                    "id": 236,
                    "name": "ElementaryTypeName",
                    "src": "752:7:4"
                  },
                  {
                    "attributes": {
                      "contractScope": null,
                      "name": "Purchase",
                      "referencedDeclaration": 199,
                      "type": "contract Purchase"
                    },
                    "id": 237,
                    "name": "UserDefinedTypeName",
                    "src": "763:8:4"
                  }
                ],
                "id": 238,
                "name": "Mapping",
                "src": "743:29:4"
              }
            ],
            "id": 239,
            "name": "VariableDeclaration",
            "src": "743:46:4"
          },
          {
            "attributes": {
              "constant": false,
              "name": "purchasesIndex",
              "scope": 467,
              "stateVariable": true,
              "storageLocation": "default",
              "type": "address[] storage ref",
              "value": null,
              "visibility": "public"
            },
            "children": [
              {
                "attributes": {
                  "length": null,
                  "type": "address[] storage pointer"
                },
                "children": [
                  {
                    "attributes": {
                      "name": "address",
                      "type": "address"
                    },
                    "id": 240,
                    "name": "ElementaryTypeName",
                    "src": "793:7:4"
                  }
                ],
                "id": 241,
                "name": "ArrayTypeName",
                "src": "793:9:4"
              }
            ],
            "id": 242,
            "name": "VariableDeclaration",
            "src": "793:31:4"
          },
          {
            "attributes": {
              "constant": false,
              "name": "token",
              "scope": 467,
              "stateVariable": true,
              "storageLocation": "default",
              "type": "contract DtxToken",
              "value": null,
              "visibility": "public"
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "DtxToken",
                  "referencedDeclaration": 137,
                  "type": "contract DtxToken"
                },
                "id": 243,
                "name": "UserDefinedTypeName",
                "src": "829:8:4"
              }
            ],
            "id": 244,
            "name": "VariableDeclaration",
            "src": "829:21:4"
          },
          {
            "attributes": {
              "constant": false,
              "name": "streamRegistry",
              "scope": 467,
              "stateVariable": true,
              "storageLocation": "default",
              "type": "contract StreamRegistry",
              "value": null,
              "visibility": "internal"
            },
            "children": [
              {
                "attributes": {
                  "contractScope": null,
                  "name": "StreamRegistry",
                  "referencedDeclaration": 696,
                  "type": "contract StreamRegistry"
                },
                "id": 245,
                "name": "UserDefinedTypeName",
                "src": "854:14:4"
              }
            ],
            "id": 246,
            "name": "VariableDeclaration",
            "src": "854:29:4"
          },
          {
            "attributes": {
              "constant": false,
              "name": "salePercentage",
              "scope": 467,
              "stateVariable": true,
              "storageLocation": "default",
              "type": "uint256",
              "visibility": "internal"
            },
            "children": [
              {
                "attributes": {
                  "name": "uint",
                  "type": "uint256"
                },
                "id": 247,
                "name": "ElementaryTypeName",
                "src": "887:4:4"
              },
              {
                "attributes": {
                  "argumentTypes": null,
                  "hexvalue": "31",
                  "isConstant": false,
                  "isLValue": false,
                  "isPure": true,
                  "lValueRequested": false,
                  "subdenomination": null,
                  "token": "number",
                  "type": "int_const 1",
                  "value": "1"
                },
                "id": 248,
                "name": "Literal",
                "src": "909:1:4"
              }
            ],
            "id": 249,
            "name": "VariableDeclaration",
            "src": "887:23:4"
          },
          {
            "attributes": {
              "constant": false,
              "implemented": true,
              "isConstructor": true,
              "name": "PurchaseRegistry",
              "payable": false,
              "scope": 467,
              "stateMutability": "nonpayable",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_gateKeeper",
                      "scope": 278,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 250,
                        "name": "ElementaryTypeName",
                        "src": "1124:7:4"
                      }
                    ],
                    "id": 251,
                    "name": "VariableDeclaration",
                    "src": "1124:19:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_token",
                      "scope": 278,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 252,
                        "name": "ElementaryTypeName",
                        "src": "1149:7:4"
                      }
                    ],
                    "id": 253,
                    "name": "VariableDeclaration",
                    "src": "1149:14:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_streamRegistry",
                      "scope": 278,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 254,
                        "name": "ElementaryTypeName",
                        "src": "1169:7:4"
                      }
                    ],
                    "id": 255,
                    "name": "VariableDeclaration",
                    "src": "1169:23:4"
                  }
                ],
                "id": 256,
                "name": "ParameterList",
                "src": "1118:78:4"
              },
              {
                "attributes": {
                  "parameters": [
                    null
                  ]
                },
                "children": [],
                "id": 264,
                "name": "ParameterList",
                "src": "1281:0:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "argumentTypes": null,
                      "overloadedDeclarations": [
                        null
                      ],
                      "referencedDeclaration": 1419,
                      "type": "type(contract Secured)",
                      "value": "Secured"
                    },
                    "id": 257,
                    "name": "Identifier",
                    "src": "1201:7:4"
                  },
                  {
                    "attributes": {
                      "argumentTypes": null,
                      "overloadedDeclarations": [
                        null
                      ],
                      "referencedDeclaration": 251,
                      "type": "address",
                      "value": "_gateKeeper"
                    },
                    "id": 258,
                    "name": "Identifier",
                    "src": "1209:11:4"
                  }
                ],
                "id": 259,
                "name": "ModifierInvocation",
                "src": "1201:20:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "argumentTypes": null,
                      "overloadedDeclarations": [
                        null
                      ],
                      "referencedDeclaration": 3891,
                      "type": "type(contract CachedByBytes32)",
                      "value": "CachedByBytes32"
                    },
                    "id": 260,
                    "name": "Identifier",
                    "src": "1226:15:4"
                  },
                  {
                    "attributes": {
                      "argumentTypes": null,
                      "hexvalue": "50757263686173655265676973747279",
                      "isConstant": false,
                      "isLValue": false,
                      "isPure": true,
                      "lValueRequested": false,
                      "subdenomination": null,
                      "token": "string",
                      "type": "literal_string \"PurchaseRegistry\"",
                      "value": "PurchaseRegistry"
                    },
                    "id": 261,
                    "name": "Literal",
                    "src": "1242:18:4"
                  },
                  {
                    "attributes": {
                      "argumentTypes": null,
                      "overloadedDeclarations": [
                        null
                      ],
                      "referencedDeclaration": 4114,
                      "type": "contract PurchaseRegistry",
                      "value": "this"
                    },
                    "id": 262,
                    "name": "Identifier",
                    "src": "1262:4:4"
                  }
                ],
                "id": 263,
                "name": "ModifierInvocation",
                "src": "1226:41:4"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "contract DtxToken"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 244,
                              "type": "contract DtxToken",
                              "value": "token"
                            },
                            "id": 265,
                            "name": "Identifier",
                            "src": "1287:5:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "contract DtxToken",
                              "type_conversion": true
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  ],
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 137,
                                  "type": "type(contract DtxToken)",
                                  "value": "DtxToken"
                                },
                                "id": 266,
                                "name": "Identifier",
                                "src": "1295:8:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 253,
                                  "type": "address",
                                  "value": "_token"
                                },
                                "id": 267,
                                "name": "Identifier",
                                "src": "1304:6:4"
                              }
                            ],
                            "id": 268,
                            "name": "FunctionCall",
                            "src": "1295:16:4"
                          }
                        ],
                        "id": 269,
                        "name": "Assignment",
                        "src": "1287:24:4"
                      }
                    ],
                    "id": 270,
                    "name": "ExpressionStatement",
                    "src": "1287:24:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "contract StreamRegistry"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 246,
                              "type": "contract StreamRegistry",
                              "value": "streamRegistry"
                            },
                            "id": 271,
                            "name": "Identifier",
                            "src": "1317:14:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "contract StreamRegistry",
                              "type_conversion": true
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    }
                                  ],
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 696,
                                  "type": "type(contract StreamRegistry)",
                                  "value": "StreamRegistry"
                                },
                                "id": 272,
                                "name": "Identifier",
                                "src": "1334:14:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 255,
                                  "type": "address",
                                  "value": "_streamRegistry"
                                },
                                "id": 273,
                                "name": "Identifier",
                                "src": "1349:15:4"
                              }
                            ],
                            "id": 274,
                            "name": "FunctionCall",
                            "src": "1334:31:4"
                          }
                        ],
                        "id": 275,
                        "name": "Assignment",
                        "src": "1317:48:4"
                      }
                    ],
                    "id": 276,
                    "name": "ExpressionStatement",
                    "src": "1317:48:4"
                  }
                ],
                "id": 277,
                "name": "Block",
                "src": "1281:89:4"
              }
            ],
            "id": 278,
            "name": "FunctionDefinition",
            "src": "1093:277:4"
          },
          {
            "attributes": {
              "constant": false,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "purchaseAccess",
              "payable": false,
              "scope": 467,
              "stateMutability": "nonpayable",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_stream",
                      "scope": 382,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 279,
                        "name": "ElementaryTypeName",
                        "src": "1634:7:4"
                      }
                    ],
                    "id": 280,
                    "name": "VariableDeclaration",
                    "src": "1634:15:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_endTime",
                      "scope": 382,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 281,
                        "name": "ElementaryTypeName",
                        "src": "1651:4:4"
                      }
                    ],
                    "id": 282,
                    "name": "VariableDeclaration",
                    "src": "1651:13:4"
                  }
                ],
                "id": 283,
                "name": "ParameterList",
                "src": "1633:32:4"
              },
              {
                "attributes": {
                  "parameters": [
                    null
                  ]
                },
                "children": [],
                "id": 284,
                "name": "ParameterList",
                "src": "1673:0:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "assignments": [
                        286
                      ]
                    },
                    "children": [
                      {
                        "attributes": {
                          "constant": false,
                          "name": "_streamPricePerSecond",
                          "scope": 382,
                          "stateVariable": false,
                          "storageLocation": "default",
                          "type": "uint256",
                          "value": null,
                          "visibility": "internal"
                        },
                        "children": [
                          {
                            "attributes": {
                              "name": "uint",
                              "type": "uint256"
                            },
                            "id": 285,
                            "name": "ElementaryTypeName",
                            "src": "1720:4:4"
                          }
                        ],
                        "id": 286,
                        "name": "VariableDeclaration",
                        "src": "1720:26:4"
                      },
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "uint256",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "getStreamPrice",
                              "referencedDeclaration": 681,
                              "type": "function (address) view external returns (uint256)"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 246,
                                  "type": "contract StreamRegistry",
                                  "value": "streamRegistry"
                                },
                                "id": 287,
                                "name": "Identifier",
                                "src": "1749:14:4"
                              }
                            ],
                            "id": 288,
                            "name": "MemberAccess",
                            "src": "1749:29:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 280,
                              "type": "address",
                              "value": "_stream"
                            },
                            "id": 289,
                            "name": "Identifier",
                            "src": "1779:7:4"
                          }
                        ],
                        "id": 290,
                        "name": "FunctionCall",
                        "src": "1749:38:4"
                      }
                    ],
                    "id": 291,
                    "name": "VariableDeclarationStatement",
                    "src": "1720:67:4"
                  },
                  {
                    "attributes": {
                      "assignments": [
                        293
                      ]
                    },
                    "children": [
                      {
                        "attributes": {
                          "constant": false,
                          "name": "_startTime",
                          "scope": 382,
                          "stateVariable": false,
                          "storageLocation": "default",
                          "type": "uint256",
                          "value": null,
                          "visibility": "internal"
                        },
                        "children": [
                          {
                            "attributes": {
                              "name": "uint",
                              "type": "uint256"
                            },
                            "id": 292,
                            "name": "ElementaryTypeName",
                            "src": "1793:4:4"
                          }
                        ],
                        "id": 293,
                        "name": "VariableDeclaration",
                        "src": "1793:15:4"
                      },
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "overloadedDeclarations": [
                            null
                          ],
                          "referencedDeclaration": 4059,
                          "type": "uint256",
                          "value": "now"
                        },
                        "id": 294,
                        "name": "Identifier",
                        "src": "1811:3:4"
                      }
                    ],
                    "id": 295,
                    "name": "VariableDeclarationStatement",
                    "src": "1793:21:4"
                  },
                  {
                    "attributes": {
                      "assignments": [
                        297
                      ]
                    },
                    "children": [
                      {
                        "attributes": {
                          "constant": false,
                          "name": "_streamPrice",
                          "scope": 382,
                          "stateVariable": false,
                          "storageLocation": "default",
                          "type": "uint256",
                          "value": null,
                          "visibility": "internal"
                        },
                        "children": [
                          {
                            "attributes": {
                              "name": "uint",
                              "type": "uint256"
                            },
                            "id": 296,
                            "name": "ElementaryTypeName",
                            "src": "1820:4:4"
                          }
                        ],
                        "id": 297,
                        "name": "VariableDeclaration",
                        "src": "1820:17:4"
                      },
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "uint256",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "mul",
                              "referencedDeclaration": 3982,
                              "type": "function (uint256,uint256) pure returns (uint256)"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 286,
                                  "type": "uint256",
                                  "value": "_streamPricePerSecond"
                                },
                                "id": 298,
                                "name": "Identifier",
                                "src": "1840:21:4"
                              }
                            ],
                            "id": 299,
                            "name": "MemberAccess",
                            "src": "1840:25:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "uint256",
                              "type_conversion": false
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_uint256",
                                      "typeString": "uint256"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "sub",
                                  "referencedDeclaration": 4020,
                                  "type": "function (uint256,uint256) pure returns (uint256)"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 282,
                                      "type": "uint256",
                                      "value": "_endTime"
                                    },
                                    "id": 300,
                                    "name": "Identifier",
                                    "src": "1866:8:4"
                                  }
                                ],
                                "id": 301,
                                "name": "MemberAccess",
                                "src": "1866:12:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 293,
                                  "type": "uint256",
                                  "value": "_startTime"
                                },
                                "id": 302,
                                "name": "Identifier",
                                "src": "1879:10:4"
                              }
                            ],
                            "id": 303,
                            "name": "FunctionCall",
                            "src": "1866:24:4"
                          }
                        ],
                        "id": 304,
                        "name": "FunctionCall",
                        "src": "1840:51:4"
                      }
                    ],
                    "id": 305,
                    "name": "VariableDeclarationStatement",
                    "src": "1820:71:4"
                  },
                  {
                    "attributes": {
                      "assignments": [
                        307
                      ]
                    },
                    "children": [
                      {
                        "attributes": {
                          "constant": false,
                          "name": "_salePercentage",
                          "scope": 382,
                          "stateVariable": false,
                          "storageLocation": "default",
                          "type": "uint256",
                          "value": null,
                          "visibility": "internal"
                        },
                        "children": [
                          {
                            "attributes": {
                              "name": "uint",
                              "type": "uint256"
                            },
                            "id": 306,
                            "name": "ElementaryTypeName",
                            "src": "1914:4:4"
                          }
                        ],
                        "id": 307,
                        "name": "VariableDeclaration",
                        "src": "1914:20:4"
                      },
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "uint256",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                }
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "mul",
                              "referencedDeclaration": 3982,
                              "type": "function (uint256,uint256) pure returns (uint256)"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 297,
                                  "type": "uint256",
                                  "value": "_streamPrice"
                                },
                                "id": 308,
                                "name": "Identifier",
                                "src": "1937:12:4"
                              }
                            ],
                            "id": 309,
                            "name": "MemberAccess",
                            "src": "1937:16:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "uint256",
                              "type_conversion": false
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_rational_100_by_1",
                                      "typeString": "int_const 100"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "div",
                                  "referencedDeclaration": 4000,
                                  "type": "function (uint256,uint256) pure returns (uint256)"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 249,
                                      "type": "uint256",
                                      "value": "salePercentage"
                                    },
                                    "id": 310,
                                    "name": "Identifier",
                                    "src": "1954:14:4"
                                  }
                                ],
                                "id": 311,
                                "name": "MemberAccess",
                                "src": "1954:18:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "hexvalue": "313030",
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "subdenomination": null,
                                  "token": "number",
                                  "type": "int_const 100",
                                  "value": "100"
                                },
                                "id": 312,
                                "name": "Literal",
                                "src": "1973:3:4"
                              }
                            ],
                            "id": 313,
                            "name": "FunctionCall",
                            "src": "1954:23:4"
                          }
                        ],
                        "id": 314,
                        "name": "FunctionCall",
                        "src": "1937:41:4"
                      }
                    ],
                    "id": 315,
                    "name": "VariableDeclarationStatement",
                    "src": "1914:64:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple()",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bool",
                                  "typeString": "bool"
                                }
                              ],
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 4060,
                              "type": "function (bool) pure",
                              "value": "require"
                            },
                            "id": 316,
                            "name": "Identifier",
                            "src": "2004:7:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "bool",
                              "type_conversion": false
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_uint256",
                                      "typeString": "uint256"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "transferFrom",
                                  "referencedDeclaration": 3190,
                                  "type": "function (address,address,uint256) external returns (bool)"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 244,
                                      "type": "contract DtxToken",
                                      "value": "token"
                                    },
                                    "id": 317,
                                    "name": "Identifier",
                                    "src": "2012:5:4"
                                  }
                                ],
                                "id": 318,
                                "name": "MemberAccess",
                                "src": "2012:18:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "sender",
                                  "referencedDeclaration": null,
                                  "type": "address"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 4057,
                                      "type": "msg",
                                      "value": "msg"
                                    },
                                    "id": 319,
                                    "name": "Identifier",
                                    "src": "2031:3:4"
                                  }
                                ],
                                "id": 320,
                                "name": "MemberAccess",
                                "src": "2031:10:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "isStructConstructorCall": false,
                                  "lValueRequested": false,
                                  "names": [
                                    null
                                  ],
                                  "type": "address",
                                  "type_conversion": false
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_address",
                                          "typeString": "address"
                                        }
                                      ],
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "member_name": "getStreamOwner",
                                      "referencedDeclaration": 695,
                                      "type": "function (address) view external returns (address)"
                                    },
                                    "children": [
                                      {
                                        "attributes": {
                                          "argumentTypes": null,
                                          "overloadedDeclarations": [
                                            null
                                          ],
                                          "referencedDeclaration": 246,
                                          "type": "contract StreamRegistry",
                                          "value": "streamRegistry"
                                        },
                                        "id": 321,
                                        "name": "Identifier",
                                        "src": "2043:14:4"
                                      }
                                    ],
                                    "id": 322,
                                    "name": "MemberAccess",
                                    "src": "2043:29:4"
                                  },
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 280,
                                      "type": "address",
                                      "value": "_stream"
                                    },
                                    "id": 323,
                                    "name": "Identifier",
                                    "src": "2073:7:4"
                                  }
                                ],
                                "id": 324,
                                "name": "FunctionCall",
                                "src": "2043:38:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "isStructConstructorCall": false,
                                  "lValueRequested": false,
                                  "names": [
                                    null
                                  ],
                                  "type": "uint256",
                                  "type_conversion": false
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_uint256",
                                          "typeString": "uint256"
                                        }
                                      ],
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": false,
                                      "lValueRequested": false,
                                      "member_name": "sub",
                                      "referencedDeclaration": 4020,
                                      "type": "function (uint256,uint256) pure returns (uint256)"
                                    },
                                    "children": [
                                      {
                                        "attributes": {
                                          "argumentTypes": null,
                                          "overloadedDeclarations": [
                                            null
                                          ],
                                          "referencedDeclaration": 297,
                                          "type": "uint256",
                                          "value": "_streamPrice"
                                        },
                                        "id": 325,
                                        "name": "Identifier",
                                        "src": "2083:12:4"
                                      }
                                    ],
                                    "id": 326,
                                    "name": "MemberAccess",
                                    "src": "2083:16:4"
                                  },
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 307,
                                      "type": "uint256",
                                      "value": "_salePercentage"
                                    },
                                    "id": 327,
                                    "name": "Identifier",
                                    "src": "2100:15:4"
                                  }
                                ],
                                "id": 328,
                                "name": "FunctionCall",
                                "src": "2083:33:4"
                              }
                            ],
                            "id": 329,
                            "name": "FunctionCall",
                            "src": "2012:105:4"
                          }
                        ],
                        "id": 330,
                        "name": "FunctionCall",
                        "src": "2004:114:4"
                      }
                    ],
                    "id": 331,
                    "name": "ExpressionStatement",
                    "src": "2004:114:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple()",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bool",
                                  "typeString": "bool"
                                }
                              ],
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 4060,
                              "type": "function (bool) pure",
                              "value": "require"
                            },
                            "id": 332,
                            "name": "Identifier",
                            "src": "2137:7:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "bool",
                              "type_conversion": false
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_address",
                                      "typeString": "address"
                                    },
                                    {
                                      "typeIdentifier": "t_contract$_PurchaseRegistry_$467",
                                      "typeString": "contract PurchaseRegistry"
                                    },
                                    {
                                      "typeIdentifier": "t_uint256",
                                      "typeString": "uint256"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "transferFrom",
                                  "referencedDeclaration": 3190,
                                  "type": "function (address,address,uint256) external returns (bool)"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 244,
                                      "type": "contract DtxToken",
                                      "value": "token"
                                    },
                                    "id": 333,
                                    "name": "Identifier",
                                    "src": "2145:5:4"
                                  }
                                ],
                                "id": 334,
                                "name": "MemberAccess",
                                "src": "2145:18:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "member_name": "sender",
                                  "referencedDeclaration": null,
                                  "type": "address"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 4057,
                                      "type": "msg",
                                      "value": "msg"
                                    },
                                    "id": 335,
                                    "name": "Identifier",
                                    "src": "2164:3:4"
                                  }
                                ],
                                "id": 336,
                                "name": "MemberAccess",
                                "src": "2164:10:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 4114,
                                  "type": "contract PurchaseRegistry",
                                  "value": "this"
                                },
                                "id": 337,
                                "name": "Identifier",
                                "src": "2176:4:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 307,
                                  "type": "uint256",
                                  "value": "_salePercentage"
                                },
                                "id": 338,
                                "name": "Identifier",
                                "src": "2182:15:4"
                              }
                            ],
                            "id": 339,
                            "name": "FunctionCall",
                            "src": "2145:53:4"
                          }
                        ],
                        "id": 340,
                        "name": "FunctionCall",
                        "src": "2137:62:4"
                      }
                    ],
                    "id": 341,
                    "name": "ExpressionStatement",
                    "src": "2137:62:4"
                  },
                  {
                    "attributes": {
                      "assignments": [
                        343
                      ]
                    },
                    "children": [
                      {
                        "attributes": {
                          "constant": false,
                          "name": "purchase",
                          "scope": 382,
                          "stateVariable": false,
                          "storageLocation": "default",
                          "type": "contract Purchase",
                          "value": null,
                          "visibility": "internal"
                        },
                        "children": [
                          {
                            "attributes": {
                              "contractScope": null,
                              "name": "Purchase",
                              "referencedDeclaration": 199,
                              "type": "contract Purchase"
                            },
                            "id": 342,
                            "name": "UserDefinedTypeName",
                            "src": "2229:8:4"
                          }
                        ],
                        "id": 343,
                        "name": "VariableDeclaration",
                        "src": "2229:17:4"
                      },
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "contract Purchase",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                },
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "type": "function (uint256,uint256,uint256,address,address) returns (contract Purchase)"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "contractScope": null,
                                  "name": "Purchase",
                                  "referencedDeclaration": 199,
                                  "type": "contract Purchase"
                                },
                                "id": 344,
                                "name": "UserDefinedTypeName",
                                "src": "2253:8:4"
                              }
                            ],
                            "id": 345,
                            "name": "NewExpression",
                            "src": "2249:12:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 286,
                              "type": "uint256",
                              "value": "_streamPricePerSecond"
                            },
                            "id": 346,
                            "name": "Identifier",
                            "src": "2269:21:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 293,
                              "type": "uint256",
                              "value": "_startTime"
                            },
                            "id": 347,
                            "name": "Identifier",
                            "src": "2298:10:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 282,
                              "type": "uint256",
                              "value": "_endTime"
                            },
                            "id": 348,
                            "name": "Identifier",
                            "src": "2316:8:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "sender",
                              "referencedDeclaration": null,
                              "type": "address"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 4057,
                                  "type": "msg",
                                  "value": "msg"
                                },
                                "id": 349,
                                "name": "Identifier",
                                "src": "2332:3:4"
                              }
                            ],
                            "id": 350,
                            "name": "MemberAccess",
                            "src": "2332:10:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 280,
                              "type": "address",
                              "value": "_stream"
                            },
                            "id": 351,
                            "name": "Identifier",
                            "src": "2350:7:4"
                          }
                        ],
                        "id": 352,
                        "name": "FunctionCall",
                        "src": "2249:114:4"
                      }
                    ],
                    "id": 353,
                    "name": "VariableDeclarationStatement",
                    "src": "2229:134:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "contract Purchase"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": true,
                              "type": "contract Purchase"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 239,
                                  "type": "mapping(address => contract Purchase)",
                                  "value": "purchases"
                                },
                                "id": 354,
                                "name": "Identifier",
                                "src": "2393:9:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": false,
                                  "isStructConstructorCall": false,
                                  "lValueRequested": false,
                                  "names": [
                                    null
                                  ],
                                  "type": "address",
                                  "type_conversion": true
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": [
                                        {
                                          "typeIdentifier": "t_contract$_Purchase_$199",
                                          "typeString": "contract Purchase"
                                        }
                                      ],
                                      "isConstant": false,
                                      "isLValue": false,
                                      "isPure": true,
                                      "lValueRequested": false,
                                      "type": "type(address)",
                                      "value": "address"
                                    },
                                    "id": 355,
                                    "name": "ElementaryTypeNameExpression",
                                    "src": "2403:7:4"
                                  },
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 343,
                                      "type": "contract Purchase",
                                      "value": "purchase"
                                    },
                                    "id": 356,
                                    "name": "Identifier",
                                    "src": "2411:8:4"
                                  }
                                ],
                                "id": 357,
                                "name": "FunctionCall",
                                "src": "2403:17:4"
                              }
                            ],
                            "id": 358,
                            "name": "IndexAccess",
                            "src": "2393:28:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 343,
                              "type": "contract Purchase",
                              "value": "purchase"
                            },
                            "id": 359,
                            "name": "Identifier",
                            "src": "2424:8:4"
                          }
                        ],
                        "id": 360,
                        "name": "Assignment",
                        "src": "2393:39:4"
                      }
                    ],
                    "id": 361,
                    "name": "ExpressionStatement",
                    "src": "2393:39:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "uint256",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "push",
                              "referencedDeclaration": null,
                              "type": "function (address) returns (uint256)"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 242,
                                  "type": "address[] storage ref",
                                  "value": "purchasesIndex"
                                },
                                "id": 362,
                                "name": "Identifier",
                                "src": "2438:14:4"
                              }
                            ],
                            "id": 364,
                            "name": "MemberAccess",
                            "src": "2438:19:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "sender",
                              "referencedDeclaration": null,
                              "type": "address"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 4057,
                                  "type": "msg",
                                  "value": "msg"
                                },
                                "id": 365,
                                "name": "Identifier",
                                "src": "2458:3:4"
                              }
                            ],
                            "id": 366,
                            "name": "MemberAccess",
                            "src": "2458:10:4"
                          }
                        ],
                        "id": 367,
                        "name": "FunctionCall",
                        "src": "2438:31:4"
                      }
                    ],
                    "id": 368,
                    "name": "ExpressionStatement",
                    "src": "2438:31:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple()",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                },
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                },
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_uint256",
                                  "typeString": "uint256"
                                },
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 235,
                              "type": "function (address,address,uint256,uint256,uint256,address)",
                              "value": "AccessPurchased"
                            },
                            "id": 369,
                            "name": "Identifier",
                            "src": "2476:15:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 280,
                              "type": "address",
                              "value": "_stream"
                            },
                            "id": 370,
                            "name": "Identifier",
                            "src": "2492:7:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "sender",
                              "referencedDeclaration": null,
                              "type": "address"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 4057,
                                  "type": "msg",
                                  "value": "msg"
                                },
                                "id": 371,
                                "name": "Identifier",
                                "src": "2501:3:4"
                              }
                            ],
                            "id": 372,
                            "name": "MemberAccess",
                            "src": "2501:10:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 293,
                              "type": "uint256",
                              "value": "_startTime"
                            },
                            "id": 373,
                            "name": "Identifier",
                            "src": "2513:10:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 282,
                              "type": "uint256",
                              "value": "_endTime"
                            },
                            "id": 374,
                            "name": "Identifier",
                            "src": "2525:8:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 297,
                              "type": "uint256",
                              "value": "_streamPrice"
                            },
                            "id": 375,
                            "name": "Identifier",
                            "src": "2535:12:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "address",
                              "type_conversion": true
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_contract$_Purchase_$199",
                                      "typeString": "contract Purchase"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "type": "type(address)",
                                  "value": "address"
                                },
                                "id": 376,
                                "name": "ElementaryTypeNameExpression",
                                "src": "2549:7:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 343,
                                  "type": "contract Purchase",
                                  "value": "purchase"
                                },
                                "id": 377,
                                "name": "Identifier",
                                "src": "2557:8:4"
                              }
                            ],
                            "id": 378,
                            "name": "FunctionCall",
                            "src": "2549:17:4"
                          }
                        ],
                        "id": 379,
                        "name": "FunctionCall",
                        "src": "2476:91:4"
                      }
                    ],
                    "id": 380,
                    "name": "ExpressionStatement",
                    "src": "2476:91:4"
                  }
                ],
                "id": 381,
                "name": "Block",
                "src": "1673:899:4"
              }
            ],
            "id": 382,
            "name": "FunctionDefinition",
            "src": "1610:962:4"
          },
          {
            "attributes": {
              "constant": false,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "hasAccess",
              "payable": false,
              "scope": 467,
              "stateMutability": "nonpayable",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_stream",
                      "scope": 392,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "bytes32",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "bytes32",
                          "type": "bytes32"
                        },
                        "id": 383,
                        "name": "ElementaryTypeName",
                        "src": "2733:7:4"
                      }
                    ],
                    "id": 384,
                    "name": "VariableDeclaration",
                    "src": "2733:15:4"
                  }
                ],
                "id": 385,
                "name": "ParameterList",
                "src": "2732:17:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "access",
                      "scope": 392,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "bool",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "bool",
                          "type": "bool"
                        },
                        "id": 386,
                        "name": "ElementaryTypeName",
                        "src": "2766:4:4"
                      }
                    ],
                    "id": 387,
                    "name": "VariableDeclaration",
                    "src": "2766:11:4"
                  }
                ],
                "id": 388,
                "name": "ParameterList",
                "src": "2765:13:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "functionReturnParameters": 388
                    },
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "hexvalue": "74727565",
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": true,
                          "lValueRequested": false,
                          "subdenomination": null,
                          "token": "bool",
                          "type": "bool",
                          "value": "true"
                        },
                        "id": 389,
                        "name": "Literal",
                        "src": "2889:4:4"
                      }
                    ],
                    "id": 390,
                    "name": "Return",
                    "src": "2882:11:4"
                  }
                ],
                "id": 391,
                "name": "Block",
                "src": "2778:120:4"
              }
            ],
            "id": 392,
            "name": "FunctionDefinition",
            "src": "2714:184:4"
          },
          {
            "attributes": {
              "constant": false,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "setSalePercentage",
              "payable": false,
              "scope": 467,
              "stateMutability": "nonpayable",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_salePercentage",
                      "scope": 402,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 393,
                        "name": "ElementaryTypeName",
                        "src": "3240:4:4"
                      }
                    ],
                    "id": 394,
                    "name": "VariableDeclaration",
                    "src": "3240:20:4"
                  }
                ],
                "id": 395,
                "name": "ParameterList",
                "src": "3239:22:4"
              },
              {
                "attributes": {
                  "parameters": [
                    null
                  ]
                },
                "children": [],
                "id": 396,
                "name": "ParameterList",
                "src": "3269:0:4"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "uint256"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 249,
                              "type": "uint256",
                              "value": "salePercentage"
                            },
                            "id": 397,
                            "name": "Identifier",
                            "src": "3275:14:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 394,
                              "type": "uint256",
                              "value": "_salePercentage"
                            },
                            "id": 398,
                            "name": "Identifier",
                            "src": "3292:15:4"
                          }
                        ],
                        "id": 399,
                        "name": "Assignment",
                        "src": "3275:32:4"
                      }
                    ],
                    "id": 400,
                    "name": "ExpressionStatement",
                    "src": "3275:32:4"
                  }
                ],
                "id": 401,
                "name": "Block",
                "src": "3269:43:4"
              }
            ],
            "id": 402,
            "name": "FunctionDefinition",
            "src": "3213:99:4"
          },
          {
            "attributes": {
              "constant": true,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "getIndexLength",
              "payable": false,
              "scope": 467,
              "stateMutability": "view",
              "superFunction": 3946,
              "visibility": "public"
            },
            "children": [
              {
                "attributes": {
                  "parameters": [
                    null
                  ]
                },
                "children": [],
                "id": 403,
                "name": "ParameterList",
                "src": "3389:2:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "length",
                      "scope": 413,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 404,
                        "name": "ElementaryTypeName",
                        "src": "3413:4:4"
                      }
                    ],
                    "id": 405,
                    "name": "VariableDeclaration",
                    "src": "3413:11:4"
                  }
                ],
                "id": 406,
                "name": "ParameterList",
                "src": "3412:13:4"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "uint256"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 405,
                              "type": "uint256",
                              "value": "length"
                            },
                            "id": 407,
                            "name": "Identifier",
                            "src": "3432:6:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "length",
                              "referencedDeclaration": null,
                              "type": "uint256"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 242,
                                  "type": "address[] storage ref",
                                  "value": "purchasesIndex"
                                },
                                "id": 408,
                                "name": "Identifier",
                                "src": "3441:14:4"
                              }
                            ],
                            "id": 409,
                            "name": "MemberAccess",
                            "src": "3441:21:4"
                          }
                        ],
                        "id": 410,
                        "name": "Assignment",
                        "src": "3432:30:4"
                      }
                    ],
                    "id": 411,
                    "name": "ExpressionStatement",
                    "src": "3432:30:4"
                  }
                ],
                "id": 412,
                "name": "Block",
                "src": "3426:41:4"
              }
            ],
            "id": 413,
            "name": "FunctionDefinition",
            "src": "3366:101:4"
          },
          {
            "attributes": {
              "constant": true,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "getByIndex",
              "payable": false,
              "scope": 467,
              "stateMutability": "view",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "index",
                      "scope": 429,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint",
                          "type": "uint256"
                        },
                        "id": 414,
                        "name": "ElementaryTypeName",
                        "src": "3491:4:4"
                      }
                    ],
                    "id": 415,
                    "name": "VariableDeclaration",
                    "src": "3491:10:4"
                  }
                ],
                "id": 416,
                "name": "ParameterList",
                "src": "3490:12:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "",
                      "scope": 429,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "bytes32",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "bytes32",
                          "type": "bytes32"
                        },
                        "id": 417,
                        "name": "ElementaryTypeName",
                        "src": "3524:7:4"
                      }
                    ],
                    "id": 418,
                    "name": "VariableDeclaration",
                    "src": "3524:7:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "contractAddress",
                      "scope": 429,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 419,
                        "name": "ElementaryTypeName",
                        "src": "3541:7:4"
                      }
                    ],
                    "id": 420,
                    "name": "VariableDeclaration",
                    "src": "3541:23:4"
                  }
                ],
                "id": 421,
                "name": "ParameterList",
                "src": "3523:42:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "functionReturnParameters": 421
                    },
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple(bytes32,address)",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_address",
                                  "typeString": "address"
                                }
                              ],
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 447,
                              "type": "function (address) view returns (bytes32,address)",
                              "value": "getByKey"
                            },
                            "id": 422,
                            "name": "Identifier",
                            "src": "3579:8:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": true,
                              "isPure": false,
                              "lValueRequested": false,
                              "type": "address"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 242,
                                  "type": "address[] storage ref",
                                  "value": "purchasesIndex"
                                },
                                "id": 423,
                                "name": "Identifier",
                                "src": "3588:14:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 415,
                                  "type": "uint256",
                                  "value": "index"
                                },
                                "id": 424,
                                "name": "Identifier",
                                "src": "3603:5:4"
                              }
                            ],
                            "id": 425,
                            "name": "IndexAccess",
                            "src": "3588:21:4"
                          }
                        ],
                        "id": 426,
                        "name": "FunctionCall",
                        "src": "3579:31:4"
                      }
                    ],
                    "id": 427,
                    "name": "Return",
                    "src": "3572:38:4"
                  }
                ],
                "id": 428,
                "name": "Block",
                "src": "3566:49:4"
              }
            ],
            "id": 429,
            "name": "FunctionDefinition",
            "src": "3471:144:4"
          },
          {
            "attributes": {
              "constant": true,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "getByKey",
              "payable": false,
              "scope": 467,
              "stateMutability": "view",
              "superFunction": null,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_key",
                      "scope": 447,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 430,
                        "name": "ElementaryTypeName",
                        "src": "3637:7:4"
                      }
                    ],
                    "id": 431,
                    "name": "VariableDeclaration",
                    "src": "3637:12:4"
                  }
                ],
                "id": 432,
                "name": "ParameterList",
                "src": "3636:14:4"
              },
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "",
                      "scope": 447,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "bytes32",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "bytes32",
                          "type": "bytes32"
                        },
                        "id": 433,
                        "name": "ElementaryTypeName",
                        "src": "3672:7:4"
                      }
                    ],
                    "id": 434,
                    "name": "VariableDeclaration",
                    "src": "3672:7:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "contractAddress",
                      "scope": 447,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 435,
                        "name": "ElementaryTypeName",
                        "src": "3689:7:4"
                      }
                    ],
                    "id": 436,
                    "name": "VariableDeclaration",
                    "src": "3689:23:4"
                  }
                ],
                "id": 437,
                "name": "ParameterList",
                "src": "3671:42:4"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "lValueRequested": false,
                          "operator": "=",
                          "type": "address"
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 436,
                              "type": "address",
                              "value": "contractAddress"
                            },
                            "id": 438,
                            "name": "Identifier",
                            "src": "3720:15:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "isStructConstructorCall": false,
                              "lValueRequested": false,
                              "names": [
                                null
                              ],
                              "type": "address",
                              "type_conversion": true
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": [
                                    {
                                      "typeIdentifier": "t_contract$_Purchase_$199",
                                      "typeString": "contract Purchase"
                                    }
                                  ],
                                  "isConstant": false,
                                  "isLValue": false,
                                  "isPure": true,
                                  "lValueRequested": false,
                                  "type": "type(address)",
                                  "value": "address"
                                },
                                "id": 439,
                                "name": "ElementaryTypeNameExpression",
                                "src": "3738:7:4"
                              },
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "isConstant": false,
                                  "isLValue": true,
                                  "isPure": false,
                                  "lValueRequested": false,
                                  "type": "contract Purchase"
                                },
                                "children": [
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 239,
                                      "type": "mapping(address => contract Purchase)",
                                      "value": "purchases"
                                    },
                                    "id": 440,
                                    "name": "Identifier",
                                    "src": "3746:9:4"
                                  },
                                  {
                                    "attributes": {
                                      "argumentTypes": null,
                                      "overloadedDeclarations": [
                                        null
                                      ],
                                      "referencedDeclaration": 431,
                                      "type": "address",
                                      "value": "_key"
                                    },
                                    "id": 441,
                                    "name": "Identifier",
                                    "src": "3756:4:4"
                                  }
                                ],
                                "id": 442,
                                "name": "IndexAccess",
                                "src": "3746:15:4"
                              }
                            ],
                            "id": 443,
                            "name": "FunctionCall",
                            "src": "3738:24:4"
                          }
                        ],
                        "id": 444,
                        "name": "Assignment",
                        "src": "3720:42:4"
                      }
                    ],
                    "id": 445,
                    "name": "ExpressionStatement",
                    "src": "3720:42:4"
                  }
                ],
                "id": 446,
                "name": "Block",
                "src": "3714:53:4"
              }
            ],
            "id": 447,
            "name": "FunctionDefinition",
            "src": "3619:148:4"
          },
          {
            "attributes": {
              "constant": false,
              "implemented": true,
              "isConstructor": false,
              "modifiers": [
                null
              ],
              "name": "invalidateCache",
              "payable": false,
              "scope": 467,
              "stateMutability": "nonpayable",
              "superFunction": 3914,
              "visibility": "public"
            },
            "children": [
              {
                "children": [
                  {
                    "attributes": {
                      "constant": false,
                      "name": "",
                      "scope": 466,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "address",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "address",
                          "type": "address"
                        },
                        "id": 448,
                        "name": "ElementaryTypeName",
                        "src": "3844:7:4"
                      }
                    ],
                    "id": 449,
                    "name": "VariableDeclaration",
                    "src": "3844:7:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "_cachedBytes32",
                      "scope": 466,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "bytes32",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "bytes32",
                          "type": "bytes32"
                        },
                        "id": 450,
                        "name": "ElementaryTypeName",
                        "src": "3872:7:4"
                      }
                    ],
                    "id": 451,
                    "name": "VariableDeclaration",
                    "src": "3872:22:4"
                  },
                  {
                    "attributes": {
                      "constant": false,
                      "name": "",
                      "scope": 466,
                      "stateVariable": false,
                      "storageLocation": "default",
                      "type": "uint256",
                      "value": null,
                      "visibility": "internal"
                    },
                    "children": [
                      {
                        "attributes": {
                          "name": "uint256",
                          "type": "uint256"
                        },
                        "id": 452,
                        "name": "ElementaryTypeName",
                        "src": "3896:7:4"
                      }
                    ],
                    "id": 453,
                    "name": "VariableDeclaration",
                    "src": "3896:7:4"
                  }
                ],
                "id": 454,
                "name": "ParameterList",
                "src": "3843:80:4"
              },
              {
                "attributes": {
                  "parameters": [
                    null
                  ]
                },
                "children": [],
                "id": 455,
                "name": "ParameterList",
                "src": "3931:0:4"
              },
              {
                "children": [
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple()",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                {
                                  "typeIdentifier": "t_bytes32",
                                  "typeString": "bytes32"
                                }
                              ],
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 3901,
                              "type": "function (bytes32)",
                              "value": "Bytes32CacheInvalidated"
                            },
                            "id": 456,
                            "name": "Identifier",
                            "src": "3937:23:4"
                          },
                          {
                            "attributes": {
                              "argumentTypes": null,
                              "overloadedDeclarations": [
                                null
                              ],
                              "referencedDeclaration": 451,
                              "type": "bytes32",
                              "value": "_cachedBytes32"
                            },
                            "id": 457,
                            "name": "Identifier",
                            "src": "3961:14:4"
                          }
                        ],
                        "id": 458,
                        "name": "FunctionCall",
                        "src": "3937:39:4"
                      }
                    ],
                    "id": 459,
                    "name": "ExpressionStatement",
                    "src": "3937:39:4"
                  },
                  {
                    "children": [
                      {
                        "attributes": {
                          "argumentTypes": null,
                          "arguments": [
                            null
                          ],
                          "isConstant": false,
                          "isLValue": false,
                          "isPure": false,
                          "isStructConstructorCall": false,
                          "lValueRequested": false,
                          "names": [
                            null
                          ],
                          "type": "tuple()",
                          "type_conversion": false
                        },
                        "children": [
                          {
                            "attributes": {
                              "argumentTypes": [
                                null
                              ],
                              "isConstant": false,
                              "isLValue": false,
                              "isPure": false,
                              "lValueRequested": false,
                              "member_name": "invalidateCache",
                              "referencedDeclaration": 3890,
                              "type": "function ()"
                            },
                            "children": [
                              {
                                "attributes": {
                                  "argumentTypes": null,
                                  "overloadedDeclarations": [
                                    null
                                  ],
                                  "referencedDeclaration": 4115,
                                  "type": "contract super PurchaseRegistry",
                                  "value": "super"
                                },
                                "id": 460,
                                "name": "Identifier",
                                "src": "3982:5:4"
                              }
                            ],
                            "id": 462,
                            "name": "MemberAccess",
                            "src": "3982:21:4"
                          }
                        ],
                        "id": 463,
                        "name": "FunctionCall",
                        "src": "3982:23:4"
                      }
                    ],
                    "id": 464,
                    "name": "ExpressionStatement",
                    "src": "3982:23:4"
                  }
                ],
                "id": 465,
                "name": "Block",
                "src": "3931:79:4"
              }
            ],
            "id": 466,
            "name": "FunctionDefinition",
            "src": "3819:191:4"
          }
        ],
        "id": 467,
        "name": "ContractDefinition",
        "src": "520:3492:4"
      }
    ],
    "id": 468,
    "name": "SourceUnit",
    "src": "0:4013:4"
  },
  "compiler": {
    "name": "solc",
    "version": "0.4.20+commit.3155dd80.Emscripten.clang"
  },
  "networks": {
    "1519293141880": {
      "events": {},
      "links": {},
      "address": "0x0bc5ef2cd9586293d84945f17dc3127a2535203d"
    },
    "1519295800744": {
      "events": {},
      "links": {},
      "address": "0x3598e8a615bee85e324c69e557d54b9e94f390bf"
    }
  },
  "schemaVersion": "1.0.1",
  "updatedAt": "2018-02-22T10:37:13.957Z"
}